"""Sphinx configuration."""
project = "My Data Model"
author = "Gareth Stockwell"
copyright = "2023, Gareth Stockwell"
extensions = [
    "sphinx.ext.autodoc",
    "sphinx.ext.napoleon",
    "sphinx_click",
    "myst_parser",
]
autodoc_class_signature = "separated"
autodoc_typehints = "description"
html_theme = "furo"


def _exclude_attrs_autogen(app, what, name, obj, options, lines):
    if "generated by attrs" in "".join(lines):
        print(f"exclude_attrs_autogen: what={what} name={name} obj={obj}")
        del lines[:]


def _exclude_attrs_init(app, what, name, obj, skip, options):
    if obj.__doc__ is not None and "generated by attrs" in obj.__doc__:
        return True


def setup(app):
    """Set up Sphinx."""
    # app.connect("autodoc-process-docstring", _exclude_attrs_autogen)
    app.connect("autodoc-skip-member", _exclude_attrs_init)
